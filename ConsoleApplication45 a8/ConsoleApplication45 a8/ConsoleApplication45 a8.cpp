/*Myron Pow, Dave Harden, CS2C, 3/2/16
Quicksort, with tons of timing and tables
meant to take an arbitrary recusive limit and to
find optimal recursive limits for sorting


SUMMARY OF RESULTS:
Values between rec_limit = 8-40 seem to have the best results
As a general trend, as the vector size increased
the optimal value also increased, as well as the size
of the flat area itself
Vector Sizes:
4*10000
8*10000
16*10000
32*10000
64*10000
128*10000
256*10000
512*10000
As a side note, the time it took to sort was roughly doubled
each doubling of vectorsize, implying that the order of quicksort
in this case is N
*/
#include <iostream>
#include <time.h>
#include "FHsort.h"
#include "FHvector.h"
using namespace std;





//quickSort client, assumes rec_limit >= 2
//PRE unsorted vector, rec limit
//POS sorted vector via quicksort
template <typename Comparable>
void quickSortX(FHvector<Comparable> & a, int rec_limit)
{
    quickSortX(a, 0, a.size() - 1, rec_limit);
}






//internal recursive function
//PRE vector, left position, right position, rec_limit
//POS sorted function
template <typename Comparable>
void quickSortX(FHvector<Comparable> & a, int left, int right, int rec_limit)
{
    Comparable pivot;
    int i, j;

    if (left + rec_limit <= right) 
    {
        pivot = median3(a, left, right);
        for (i = left, j = right - 1;;)
        {
            while (a[++i] < pivot)
                ;
            while (pivot < a[--j])
                ;
            if (i < j)
                mySwapFH(a[i], a[j]);
            else
                break;
        }

        mySwapFH(a[i], a[right - 1]);  // restore pivot

        // recursive calls on smaller sub-groups
        quickSortX(a, left, i - 1, rec_limit);
        quickSortX(a, i + 1, right, rec_limit);

    } else {
        // non-recursive escape valve - insertionSort
        insertionSort(a, left, right);
    }
}







#define VECTOR_SIZE 5120000

int main()
{
    int i, k;
    FHvector<int> fhVectorOfInts(VECTOR_SIZE);
    FHvector<int> testVector(VECTOR_SIZE);
    srand(time(NULL));
    clock_t startTime, stopTime;

    for (i = 0; i < VECTOR_SIZE; i++)
    {
        fhVectorOfInts[i] = (rand() % VECTOR_SIZE);
    }

    //outputs
    cout << "Vector size: " << VECTOR_SIZE << endl;
    cout << "rec_Limit \t Time Elapsed (s)" << endl;

    //rec_limit 2-300, even only
    for (k = 2; k <= 300; k += 2)
    {
        for (i = 0; i < VECTOR_SIZE; i++)
        {
            testVector[i] = fhVectorOfInts[i];
        }

        startTime = clock(); 
        quickSortX(testVector, k);
        stopTime = clock();

        cout << k << "\t\t\t"
            << (double)(stopTime - startTime) / (double)CLOCKS_PER_SEC
            << endl;
    }
    return 0;
}

/*run and answers to questions
Vector size: 40000
rec_Limit        Time Elapsed (s)
2                       0.034
4                       0.032
6                       0.032
8                       0.031
10                      0.032
12                      0.035
14                      0.035
16                      0.033
18                      0.034
20                      0.034
22                      0.036
24                      0.037
26                      0.039
28                      0.038
30                      0.038
32                      0.039
34                      0.039
36                      0.04
38                      0.042
40                      0.042
42                      0.043
44                      0.044
46                      0.044
48                      0.046
50                      0.045
52                      0.047
54                      0.048
56                      0.048
58                      0.05
60                      0.052
62                      0.052
64                      0.052
66                      0.053
68                      0.055
70                      0.056
72                      0.056
74                      0.058
76                      0.059
78                      0.059
80                      0.064
82                      0.07
84                      0.066
86                      0.063
88                      0.064
90                      0.065
92                      0.065
94                      0.067
96                      0.067
98                      0.068
100                     0.068
102                     0.07
104                     0.07
106                     0.072
108                     0.074
110                     0.077
112                     0.075
114                     0.078
116                     0.079
118                     0.08
120                     0.078
122                     0.08
124                     0.088
126                     0.082
128                     0.082
130                     0.083
132                     0.084
134                     0.085
136                     0.084
138                     0.086
140                     0.09
142                     0.088
144                     0.088
146                     0.092
148                     0.093
150                     0.092
152                     0.095
154                     0.094
156                     0.098
158                     0.11
160                     0.097
162                     0.097
164                     0.099
166                     0.1
168                     0.099
170                     0.1
172                     0.1
174                     0.103
176                     0.104
178                     0.103
180                     0.106
182                     0.107
184                     0.11
186                     0.108
188                     0.11
190                     0.112
192                     0.113
194                     0.112
196                     0.113
198                     0.115
200                     0.117
202                     0.119
204                     0.119
206                     0.12
208                     0.119
210                     0.12
212                     0.122
214                     0.122
216                     0.124
218                     0.123
220                     0.123
222                     0.126
224                     0.125
226                     0.126
228                     0.128
230                     0.13
232                     0.13
234                     0.13
236                     0.131
238                     0.132
240                     0.134
242                     0.134
244                     0.156
246                     0.138
248                     0.14
250                     0.141
252                     0.142
254                     0.143
256                     0.145
258                     0.15
260                     0.151
262                     0.15
264                     0.146
266                     0.145
268                     0.148
270                     0.147
272                     0.148
274                     0.15
276                     0.151
278                     0.153
280                     0.16
282                     0.166
284                     0.164
286                     0.161
288                     0.162
290                     0.167
292                     0.16
294                     0.157
296                     0.159
298                     0.161
300                     0.163
Press any key to continue . . .




Vector size: 80000
rec_Limit        Time Elapsed (s)
2                       0.073
4                       0.083
6                       0.073
8                       0.067
10                      0.067
12                      0.068
14                      0.069
16                      0.071
18                      0.07
20                      0.072
22                      0.072
24                      0.074
26                      0.077
28                      0.077
30                      0.078
32                      0.079
34                      0.08
36                      0.084
38                      0.084
40                      0.087
42                      0.088
44                      0.094
46                      0.095
48                      0.095
50                      0.095
52                      0.096
54                      0.098
56                      0.1
58                      0.102
60                      0.103
62                      0.104
64                      0.105
66                      0.108
68                      0.112
70                      0.113
72                      0.114
74                      0.116
76                      0.119
78                      0.118
80                      0.119
82                      0.123
84                      0.126
86                      0.129
88                      0.128
90                      0.129
92                      0.129
94                      0.132
96                      0.134
98                      0.137
100                     0.139
102                     0.152
104                     0.148
106                     0.143
108                     0.145
110                     0.148
112                     0.151
114                     0.153
116                     0.154
118                     0.156
120                     0.158
122                     0.159
124                     0.16
126                     0.163
128                     0.166
130                     0.168
132                     0.168
134                     0.17
136                     0.173
138                     0.171
140                     0.176
142                     0.178
144                     0.178
146                     0.182
148                     0.185
150                     0.186
152                     0.186
154                     0.189
156                     0.19
158                     0.195
160                     0.196
162                     0.219
164                     0.199
166                     0.2
168                     0.203
170                     0.202
172                     0.204
174                     0.207
176                     0.21
178                     0.211
180                     0.209
182                     0.212
184                     0.214
186                     0.22
188                     0.219
190                     0.22
192                     0.22
194                     0.227
196                     0.228
198                     0.227
200                     0.23
202                     0.232
204                     0.235
206                     0.235
208                     0.256
210                     0.241
212                     0.241
214                     0.245
216                     0.244
218                     0.249
220                     0.252
222                     0.252
224                     0.254
226                     0.257
228                     0.259
230                     0.257
232                     0.259
234                     0.262
236                     0.263
238                     0.264
240                     0.266
242                     0.267
244                     0.267
246                     0.273
248                     0.288
250                     0.279
252                     0.276
254                     0.278
256                     0.282
258                     0.284
260                     0.287
262                     0.293
264                     0.296
266                     0.293
268                     0.298
270                     0.3
272                     0.3
274                     0.301
276                     0.305
278                     0.308
280                     0.309
282                     0.327
284                     0.309
286                     0.31
288                     0.314
290                     0.318
292                     0.32
294                     0.317
296                     0.318
298                     0.319
300                     0.319
Press any key to continue . . .






Vector size: 160000
rec_Limit        Time Elapsed (s)
2                       0.16
4                       0.152
6                       0.145
8                       0.146
10                      0.149
12                      0.148
14                      0.147
16                      0.146
18                      0.146
20                      0.15
22                      0.15
24                      0.151
26                      0.155
28                      0.155
30                      0.16
32                      0.163
34                      0.182
36                      0.17
38                      0.174
40                      0.175
42                      0.178
44                      0.183
46                      0.189
48                      0.194
50                      0.202
52                      0.196
54                      0.203
56                      0.203
58                      0.227
60                      0.213
62                      0.217
64                      0.22
66                      0.219
68                      0.225
70                      0.234
72                      0.249
74                      0.238
76                      0.25
78                      0.245
80                      0.264
82                      0.256
84                      0.258
86                      0.277
88                      0.265
90                      0.282
92                      0.279
94                      0.27
96                      0.288
98                      0.28
100                     0.284
102                     0.304
104                     0.288
106                     0.295
108                     0.293
110                     0.296
112                     0.302
114                     0.307
116                     0.329
118                     0.312
120                     0.32
122                     0.325
124                     0.325
126                     0.337
128                     0.335
130                     0.336
132                     0.348
134                     0.344
136                     0.358
138                     0.348
140                     0.36
142                     0.356
144                     0.362
146                     0.385
148                     0.369
150                     0.376
152                     0.391
154                     0.374
156                     0.407
158                     0.408
160                     0.396
162                     0.4
164                     0.403
166                     0.42
168                     0.416
170                     0.429
172                     0.428
174                     0.419
176                     0.424
178                     0.426
180                     0.427
182                     0.434
184                     0.44
186                     0.445
188                     0.445
190                     0.458
192                     0.45
194                     0.475
196                     0.458
198                     0.464
200                     0.48
202                     0.465
204                     0.471
206                     0.481
208                     0.479
210                     0.484
212                     0.496
214                     0.515
216                     0.499
218                     0.503
220                     0.502
222                     0.51
224                     0.517
226                     0.522
228                     0.526
230                     0.526
232                     0.53
234                     0.554
236                     0.536
238                     0.541
240                     0.55
242                     0.554
244                     0.556
246                     0.561
248                     0.565
250                     0.569
252                     0.595
254                     0.579
256                     0.579
258                     0.587
260                     0.59
262                     0.594
264                     0.591
266                     0.6
268                     0.612
270                     0.623
272                     0.63
274                     0.642
276                     0.634
278                     0.62
280                     0.63
282                     0.631
284                     0.651
286                     0.665
288                     0.661
290                     0.654
292                     0.67
294                     0.675
296                     0.665
298                     0.673
300                     0.698
Press any key to continue . . .



Vector size: 320000
rec_Limit        Time Elapsed (s)
2                       0.319
4                       0.301
6                       0.294
8                       0.288
10                      0.287
12                      0.286
14                      0.292
16                      0.29
18                      0.29
20                      0.297
22                      0.297
24                      0.318
26                      0.307
28                      0.312
30                      0.318
32                      0.324
34                      0.321
36                      0.331
38                      0.339
40                      0.344
42                      0.349
44                      0.358
46                      0.361
48                      0.371
50                      0.377
52                      0.386
54                      0.406
56                      0.394
58                      0.408
60                      0.408
62                      0.416
64                      0.425
66                      0.429
68                      0.441
70                      0.437
72                      0.45
74                      0.457
76                      0.488
78                      0.472
80                      0.482
82                      0.488
84                      0.492
86                      0.498
88                      0.512
90                      0.511
92                      0.521
94                      0.528
96                      0.552
98                      0.544
100                     0.549
102                     0.557
104                     0.567
106                     0.574
108                     0.576
110                     0.583
112                     0.595
114                     0.615
116                     0.608
118                     0.616
120                     0.624
122                     0.631
124                     0.633
126                     0.64
128                     0.649
130                     0.678
132                     0.662
134                     0.673
136                     0.683
138                     0.705
140                     0.709
142                     0.737
144                     0.757
146                     0.725
148                     0.724
150                     0.769
152                     0.755
154                     0.755
156                     0.763
158                     0.819
160                     0.783
162                     0.778
164                     0.785
166                     0.79
168                     0.788
170                     0.828
172                     0.811
174                     0.817
176                     0.826
178                     0.839
180                     0.845
182                     0.866
184                     0.853
186                     0.864
188                     0.877
190                     0.883
192                     0.894
194                     0.911
196                     0.908
198                     0.911
200                     0.917
202                     0.925
204                     0.946
206                     0.94
208                     0.944
210                     0.958
212                     0.959
214                     0.971
216                     1.015
218                     0.996
220                     0.998
222                     1.005
224                     1.018
226                     1.034
228                     1.03
230                     1.035
232                     1.045
234                     1.068
236                     1.056
238                     1.066
240                     1.072
242                     1.08
244                     1.1
246                     1.088
248                     1.103
250                     1.118
252                     1.123
254                     1.149
256                     1.155
258                     1.145
260                     1.162
262                     1.175
264                     1.17
266                     1.18
268                     1.191
270                     1.211
272                     1.21
274                     1.209
276                     1.219
278                     1.224
280                     1.233
282                     1.23
284                     1.248
286                     1.25
288                     1.273
290                     1.268
292                     1.277
294                     1.283
296                     1.309
298                     1.301
300                     1.309
Press any key to continue . . .





Vector size: 640000
rec_Limit        Time Elapsed (s)
2                       0.654
4                       0.627
6                       0.604
8                       0.585
10                      0.584
12                      0.587
14                      0.609
16                      0.591
18                      0.59
20                      0.602
22                      0.602
24                      0.602
26                      0.616
28                      0.632
30                      0.656
32                      0.665
34                      0.691
36                      0.672
38                      0.679
40                      0.684
42                      0.687
44                      0.725
46                      0.698
48                      0.712
50                      0.774
52                      0.735
54                      0.748
56                      0.772
58                      0.797
60                      0.795
62                      0.797
64                      0.814
66                      0.817
68                      0.83
70                      0.86
72                      0.855
74                      0.864
76                      0.892
78                      0.902
80                      0.9
82                      0.943
84                      0.94
86                      0.965
88                      0.968
90                      0.989
92                      1.015
94                      1.021
96                      1.026
98                      1.027
100                     1.034
102                     1.077
104                     1.071
106                     1.086
108                     1.104
110                     1.14
112                     1.126
114                     1.139
116                     1.152
118                     1.154
120                     1.186
122                     1.198
124                     1.233
126                     1.238
128                     1.277
130                     1.258
132                     1.28
134                     1.306
136                     1.335
138                     1.329
140                     1.347
142                     1.374
144                     1.375
146                     1.392
148                     1.412
150                     1.43
152                     1.427
154                     1.455
156                     1.484
158                     1.495
160                     1.492
162                     1.518
164                     1.557
166                     1.555
168                     1.562
170                     1.602
172                     1.608
174                     1.613
176                     1.627
178                     1.631
180                     1.658
182                     1.676
184                     1.689
186                     1.703
188                     1.714
190                     1.73
192                     1.742
194                     1.787
196                     1.77
198                     1.781
200                     1.823
202                     1.827
204                     1.846
206                     1.872
208                     1.837
210                     1.868
212                     1.867
214                     1.888
216                     1.915
218                     1.951
220                     1.946
222                     1.96
224                     1.948
226                     1.967
228                     1.988
230                     2.02
232                     2.054
234                     2.044
236                     2.104
238                     2.063
240                     2.078
242                     2.13
244                     2.126
246                     2.134
248                     2.141
250                     2.171
252                     2.167
254                     2.158
256                     2.227
258                     2.243
260                     2.255
262                     2.232
264                     2.269
266                     2.277
268                     2.331
270                     2.323
272                     2.325
274                     2.385
276                     2.384
278                     2.417
280                     2.39
282                     2.564
284                     2.492
286                     2.504
288                     2.518
290                     2.523
292                     2.512
294                     2.567
296                     2.592
298                     2.596
300                     2.598
Press any key to continue . . .





Vector size: 1280000
rec_Limit        Time Elapsed (s)
2                       1.401
4                       1.355
6                       1.334
8                       1.287
10                      1.264
12                      1.211
14                      1.197
16                      1.234
18                      1.208
20                      1.202
22                      1.223
24                      1.245
26                      1.246
28                      1.269
30                      1.262
32                      1.38
34                      1.299
36                      1.312
38                      1.333
40                      1.381
42                      1.453
44                      1.421
46                      1.427
48                      1.439
50                      1.539
52                      1.428
54                      1.432
56                      1.427
58                      1.421
60                      1.461
62                      1.488
64                      1.512
66                      1.552
68                      1.546
70                      1.565
72                      1.621
74                      1.628
76                      1.646
78                      1.693
80                      1.69
82                      1.708
84                      1.742
86                      1.718
88                      1.738
90                      1.796
92                      1.816
94                      1.827
96                      1.853
98                      1.861
100                     1.875
102                     1.908
104                     1.952
106                     2.022
108                     2.03
110                     2.062
112                     2.107
114                     2.13
116                     2.207
118                     2.247
120                     2.266
122                     2.193
124                     2.245
126                     2.252
128                     2.351
130                     2.341
132                     2.327
134                     2.384
136                     2.385
138                     2.419
140                     2.442
142                     2.469
144                     2.463
146                     2.499
148                     2.509
150                     2.56
152                     2.559
154                     2.809
156                     2.641
158                     2.889
160                     2.787
162                     2.743
164                     2.827
166                     2.845
168                     2.876
170                     2.861
172                     2.841
174                     2.958
176                     2.916
178                     2.981
180                     2.955
182                     3.031
184                     3.1
186                     3.09
188                     3.087
190                     3.145
192                     3.196
194                     3.217
196                     3.225
198                     3.281
200                     3.32
202                     3.327
204                     3.307
206                     3.39
208                     3.366
210                     3.494
212                     3.502
214                     3.542
216                     3.706
218                     3.655
220                     3.644
222                     3.65
224                     3.748
226                     3.736
228                     3.687
230                     3.874
232                     3.824
234                     3.84
236                     3.838
238                     3.863
240                     4.035
242                     4.312
244                     4.011
246                     4.016
248                     4.161
250                     4.088
252                     4.098
254                     4.053
256                     4.116
258                     4.241
260                     4.131
262                     4.215
264                     4.172
266                     4.406
268                     4.413
270                     4.481
272                     4.416
274                     4.437
276                     4.384
278                     4.406
280                     4.523
282                     4.453
284                     4.481
286                     4.614
288                     4.626
290                     4.64
292                     4.688
294                     4.736
296                     4.731
298                     4.717
300                     4.705
Press any key to continue . . .


Vector size: 2560000
rec_Limit        Time Elapsed (s)
2                       3.019
4                       2.937
6                       2.855
8                       2.77
10                      2.808
12                      2.717
14                      2.718
16                      2.657
18                      2.709
20                      2.638
22                      2.622
24                      2.665
26                      2.681
28                      2.619
30                      2.657
32                      2.664
34                      2.653
36                      2.667
38                      2.649
40                      2.711
42                      2.681
44                      2.713
46                      2.707
48                      2.724
50                      2.742
52                      2.801
54                      2.835
56                      2.811
58                      2.849
60                      2.861
62                      2.903
64                      2.905
66                      3.041
68                      3.085
70                      3.099
72                      3.145
74                      3.201
76                      3.217
78                      3.322
80                      3.302
82                      3.325
84                      3.404
86                      3.464
88                      3.477
90                      3.518
92                      3.567
94                      3.539
96                      3.617
98                      3.742
100                     3.806
102                     3.784
104                     3.727
106                     3.771
108                     3.785
110                     3.773
112                     3.821
114                     3.891
116                     3.933
118                     3.913
120                     3.898
122                     3.98
124                     4.118
126                     4.178
128                     4.143
130                     4.194
132                     4.269
134                     4.264
136                     4.342
138                     4.372
140                     4.4
142                     4.475
144                     4.578
146                     4.612
148                     4.651
150                     4.682
152                     4.802
154                     4.872
156                     4.968
158                     5.068
160                     5.123
162                     5.056
164                     5.106
166                     5.155
168                     5.289
170                     5.301
172                     5.292
174                     5.297
176                     5.318
178                     5.354
180                     5.41
182                     5.432
184                     5.464
186                     5.5
188                     5.55
190                     5.581
192                     5.625
194                     5.678
196                     5.707
198                     5.772
200                     5.816
202                     5.867
204                     5.895
206                     5.979
208                     6.063
210                     6.183
212                     6.212
214                     6.286
216                     6.313
218                     6.41
220                     6.599
222                     6.622
224                     6.832
226                     6.91
228                     6.889
230                     6.847
232                     6.839
234                     6.92
236                     7.008
238                     6.999
240                     7.089
242                     7.156
244                     7.213
246                     7.286
248                     7.323
250                     7.402
252                     7.406
254                     7.491
256                     7.534
258                     7.733
260                     7.658
262                     7.64
264                     7.693
266                     7.735
268                     7.752
270                     7.898
272                     7.914
274                     7.971
276                     8.141
278                     8.365
280                     8.197
282                     8.252
284                     8.446
286                     8.31
288                     8.32
290                     8.412
292                     8.55
294                     8.715
296                     8.839
298                     8.885
300                     8.824
Press any key to continue . . .




Vector size: 5120000
rec_Limit        Time Elapsed (s)
2                       6.461
4                       6.21
6                       6.012
8                       5.943
10                      5.837
12                      5.807
14                      5.685
16                      5.648
18                      5.68
20                      5.606
22                      5.571
24                      5.494
26                      5.494
28                      5.502
30                      5.498
32                      5.445
34                      5.422
36                      5.523
38                      5.47
40                      5.497
42                      5.445
44                      5.46
46                      5.479
48                      5.503
50                      5.524
52                      5.548
54                      5.565
56                      5.604
58                      5.627
60                      5.639
62                      5.649
64                      5.763
66                      5.74
68                      5.753
70                      5.768
72                      5.802
74                      5.877
76                      5.82
78                      5.824
80                      5.922
82                      5.966
84                      6.032
86                      5.951
88                      5.949
90                      5.996
92                      6.101
94                      6.151
96                      6.167
98                      6.25
100                     6.323
102                     6.391
104                     6.423
106                     6.463
108                     6.531
110                     6.56
112                     6.612
114                     6.723
116                     6.75
118                     6.803
120                     6.908
122                     6.889
124                     7.088
126                     7.086
128                     7.168
130                     7.289
132                     7.378
134                     7.496
136                     7.544
138                     7.666
140                     7.738
142                     7.877
144                     8.054
146                     8.083
148                     8.185
150                     8.3
152                     8.383
154                     8.531
156                     8.604
158                     8.667
160                     8.738
162                     8.891
164                     8.982
166                     9.04
168                     9.16
170                     9.245
172                     9.382
174                     9.539
176                     9.488
178                     9.563
180                     9.664
182                     9.956
184                     9.812
186                     10.003
188                     10.149
190                     10.025
192                     10.09
194                     10.226
196                     10.211
198                     10.29
200                     10.663
202                     10.437
204                     10.473
206                     10.502
208                     10.592
210                     10.588
212                     10.667
214                     10.666
216                     10.682
218                     10.707
220                     11.009
222                     11.057
224                     11.061
226                     10.968
228                     11.062
230                     11.062
232                     11.158
234                     11.486
236                     11.461
238                     11.352
240                     11.537
242                     11.614
244                     11.515
246                     11.581
248                     11.61
250                     11.663
252                     12.026
254                     11.878
256                     12.179
258                     12.112
260                     12.201
262                     12.318
264                     12.52
266                     12.793
268                     12.779
270                     12.921
272                     13.064
274                     13.455
276                     13.304
278                     13.246
280                     13.553
282                     13.487
284                     13.632
286                     13.767
288                     13.98
290                     14.002
292                     14.231
294                     14.363
296                     14.428
298                     14.625
300                     14.618
Press any key to continue . . .



*/